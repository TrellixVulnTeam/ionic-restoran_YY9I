{"version":3,"sources":["./src/app/upload-bukti-transfer/upload-bukti-transfer-routing.module.ts","./src/app/upload-bukti-transfer/upload-bukti-transfer.module.ts","./src/app/upload-bukti-transfer/upload-bukti-transfer.page.ts","./src/app/upload-bukti-transfer/upload-bukti-transfer.page.scss","./src/app/upload-bukti-transfer/upload-bukti-transfer.page.html"],"names":[],"mappings":"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","file":"src_app_upload-bukti-transfer_upload-bukti-transfer_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UploadBuktiTransferPage } from './upload-bukti-transfer.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UploadBuktiTransferPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UploadBuktiTransferPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {ReactiveFormsModule} from \"@angular/forms\";\nimport { IonicModule } from '@ionic/angular';\n\nimport { UploadBuktiTransferPageRoutingModule } from './upload-bukti-transfer-routing.module';\n\nimport { UploadBuktiTransferPage } from './upload-bukti-transfer.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UploadBuktiTransferPageRoutingModule,\n      ReactiveFormsModule\n  ],\n  declarations: [UploadBuktiTransferPage]\n})\nexport class UploadBuktiTransferPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {Camera, CameraOptions} from \"@ionic-native/camera/ngx\";\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport {environment} from \"../../environments/environment\";\nimport { LoadingService } from \"../services/loading.service\";\nimport { ToastController } from '@ionic/angular';\nimport {ReactiveFormsModule} from \"@angular/forms\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { NavController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-upload-bukti-transfer',\n  templateUrl: './upload-bukti-transfer.page.html',\n  styleUrls: ['./upload-bukti-transfer.page.scss'],\n})\nexport class UploadBuktiTransferPage implements OnInit {\n\n  FileURI:any;\n  FileName:any;\n  returnPath:string='';\n  currentImage: any;\n  imgData:any;\n\n\n  constructor(private camera:Camera,\n              private ls:LoadingService,\n              private toast: ToastController,\n              private formBuilder: FormBuilder,\n              public navCtrl: NavController,\n              private transfer: FileTransfer) { }\n\n  ngOnInit() {\n  }\n\n  bukForm = this.formBuilder.group({\n    nomor:['', [Validators.required]]\n  });\n\n  get nomor(){\n    return this.bukForm.get('nomor');\n  }\n  public errorMessages = {\n    nomor:[\n      { type: 'required', message: 'Nomor harus diisi'}\n    ]\n  }\n\n  takePicture() {\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    };\n\n    var h = this.camera.getPicture(options).then((imageData) => {\n      this.currentImage = 'data:image/jpeg;base64,' + imageData;\n      this.imgData = imageData;\n    }, (err) => {\n      // Handle error\n      console.log(\"Camera issue:\" + err);\n    });\n\n  }\n\n  upload(){\n    //option upload\n    this.ls.present();\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    let options: FileUploadOptions = {\n      fileKey: 'foto',\n      fileName: this.imgData + '.jpeg',\n      chunkedMode: false,\n      params: {'nomor':this.bukForm.value.nomor}, // add another parameter (opsional)\n      headers: {}\n    }\n\n    fileTransfer.upload(this.currentImage, environment.baseUrl + 'pesanan/upload_bukti_transfer_reservasi.php', options)\n        .then((data) => {\n          console.log(\"Upload OK\");\n          this.ls.dismiss();\n          this.showToast(data.response);\n          this.navCtrl.navigateRoot('/');\n\n        }, (err) => {\n          console.log(err);\n          this.ls.dismiss();\n          this.showToast(err);\n        })\n  }\n\n  async showToast(str){\n    await this.toast.create({\n      message: str,\n      duration: 2000,\n      position: 'bottom',\n      buttons: [{\n        text: 'OK',\n        handler: () => {\n          console.log('OK Clicked');\n        }\n      }]\n    }).then(x => x.present());\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGxvYWQtYnVrdGktdHJhbnNmZXIucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>Upload Bukti Transfer</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [class.ion-padding]=\\\"20\\\" class=\\\"background\\\">\\n\\n  <ion-button (click)=\\\"takePicture()\\\" expand=\\\"full\\\">\\n    <ion-icon slot=\\\"start\\\" name=\\\"camera\\\"></ion-icon>\\n    Buka kamera\\n  </ion-button>\\n\\n  <br>\\n  <form [formGroup]=\\\"bukForm\\\" *ngIf=\\\"currentImage\\\" (ngSubmit)=\\\"upload()\\\">\\n\\n    <ion-card *ngIf=\\\"currentImage\\\">\\n      <ion-card-header>\\n        <ion-card-subtitle>Hasil Kamera</ion-card-subtitle>\\n        <ion-card-title>Pastikan foto struk jelas/tidak buram</ion-card-title>\\n      </ion-card-header>\\n\\n      <ion-card-content>\\n        <img [src]=\\\"currentImage\\\" *ngIf=\\\"currentImage\\\">\\n      </ion-card-content>\\n    </ion-card>\\n\\n    <br>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Nomor transaksi</ion-label>\\n      <ion-input inputmode=\\\"text\\\" formControlName=\\\"nomor\\\"></ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of errorMessages.nomor\\\">\\n      <ng-container *ngIf=\\\"nomor.hasError(error.type) && (nomor.dirty || nomor.touched)\\\">\\n        <center><small>{{ error.message }}</small></center>\\n      </ng-container>\\n    </div>\\n\\n    <ion-button [disabled]=\\\"!bukForm.valid\\\" (click)=\\\"upload()\\\" expand=\\\"full\\\">Upload</ion-button>\\n  </form>\\n\\n\\n\\n\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}