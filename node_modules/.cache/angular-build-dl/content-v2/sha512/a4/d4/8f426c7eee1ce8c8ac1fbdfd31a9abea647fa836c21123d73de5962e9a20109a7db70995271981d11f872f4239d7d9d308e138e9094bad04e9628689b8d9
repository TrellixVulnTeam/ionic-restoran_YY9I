{"version":3,"sources":["webpack:///src/app/upload-bukti-transfer/upload-bukti-transfer-routing.module.ts","webpack:///src/app/upload-bukti-transfer/upload-bukti-transfer.module.ts","webpack:///src/app/upload-bukti-transfer/upload-bukti-transfer.page.ts","webpack:///src/app/upload-bukti-transfer/upload-bukti-transfer.page.scss","webpack:///src/app/upload-bukti-transfer/upload-bukti-transfer.page.html"],"names":["routes","path","component","UploadBuktiTransferPage","UploadBuktiTransferPageRoutingModule","NgModule","imports","RouterModule","exports","UploadBuktiTransferPageModule","CommonModule","FormsModule","IonicModule","ReactiveFormsModule","declarations","camera","ls","toast","formBuilder","navCtrl","transfer","returnPath","bukForm","group","nomor","Validators","errorMessages","type","message","get","options","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","h","getPicture","then","imageData","currentImage","imgData","err","console","log","present","fileTransfer","create","fileKey","fileName","chunkedMode","params","value","headers","upload","environment","data","dismiss","x","showToast","pesan","navigateRoot","str","duration","position","buttons","text","handler","Camera","LoadingService","ToastController","FormBuilder","NavController","FileTransfer","Component","selector","template"],"mappings":"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","file":"src_app_upload-bukti-transfer_upload-bukti-transfer_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UploadBuktiTransferPage } from './upload-bukti-transfer.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UploadBuktiTransferPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UploadBuktiTransferPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {ReactiveFormsModule} from \"@angular/forms\";\nimport { IonicModule } from '@ionic/angular';\n\nimport { UploadBuktiTransferPageRoutingModule } from './upload-bukti-transfer-routing.module';\n\nimport { UploadBuktiTransferPage } from './upload-bukti-transfer.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UploadBuktiTransferPageRoutingModule,\n      ReactiveFormsModule\n  ],\n  declarations: [UploadBuktiTransferPage]\n})\nexport class UploadBuktiTransferPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {Camera, CameraOptions} from \"@ionic-native/camera/ngx\";\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport {environment} from \"../../environments/environment\";\nimport { LoadingService } from \"../services/loading.service\";\nimport { ToastController } from '@ionic/angular';\nimport {ReactiveFormsModule} from \"@angular/forms\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { NavController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-upload-bukti-transfer',\n  templateUrl: './upload-bukti-transfer.page.html',\n  styleUrls: ['./upload-bukti-transfer.page.scss'],\n})\nexport class UploadBuktiTransferPage implements OnInit {\n\n  FileURI:any;\n  FileName:any;\n  returnPath:string='';\n  currentImage: any;\n  imgData:any;\n\n\n  constructor(private camera:Camera,\n              private ls:LoadingService,\n              private toast: ToastController,\n              private formBuilder: FormBuilder,\n              public navCtrl: NavController,\n              private transfer: FileTransfer) { }\n\n  ngOnInit() {\n  }\n\n  bukForm = this.formBuilder.group({\n    nomor:['', [Validators.required]]\n  });\n\n  get nomor(){\n    return this.bukForm.get('nomor');\n  }\n  public errorMessages = {\n    nomor:[\n      { type: 'required', message: 'Nomor harus diisi'}\n    ]\n  }\n\n  takePicture() {\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    };\n\n    var h = this.camera.getPicture(options).then((imageData) => {\n      this.currentImage = 'data:image/jpeg;base64,' + imageData;\n      this.imgData = imageData;\n    }, (err) => {\n      // Handle error\n      console.log(\"Camera issue:\" + err);\n    });\n\n  }\n\n  upload(){\n    //option upload\n    this.ls.present();\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    let options: FileUploadOptions = {\n      fileKey: 'foto',\n      fileName: this.imgData + '.jpeg',\n      chunkedMode: false,\n      params: {'nomor':this.bukForm.value.nomor}, // add another parameter (opsional)\n      headers: {}\n    }\n\n    fileTransfer.upload(this.currentImage, environment.baseUrl + 'pesanan/upload_bukti_transfer_reservasi.php', options)\n        .then((data) => {\n          console.log(\"Upload OK\");\n          this.ls.dismiss();\n          var x : any = {};\n          x = data;\n          this.showToast(x.pesan);\n          this.navCtrl.navigateRoot('/');\n\n        }, (err) => {\n          console.log(err);\n          this.ls.dismiss();\n          this.showToast(err);\n        })\n  }\n\n  async showToast(str){\n    await this.toast.create({\n      message: str,\n      duration: 2000,\n      position: 'bottom',\n      buttons: [{\n        text: 'OK',\n        handler: () => {\n          console.log('OK Clicked');\n        }\n      }]\n    }).then(x => x.present());\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGxvYWQtYnVrdGktdHJhbnNmZXIucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>Upload Bukti Transfer</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [class.ion-padding]=\\\"20\\\" class=\\\"background\\\">\\n\\n  <ion-button (click)=\\\"takePicture()\\\" expand=\\\"full\\\">\\n    <ion-icon slot=\\\"start\\\" name=\\\"camera\\\"></ion-icon>\\n    Buka kamera\\n  </ion-button>\\n\\n  <br>\\n  <form [formGroup]=\\\"bukForm\\\" *ngIf=\\\"currentImage\\\" (ngSubmit)=\\\"upload()\\\">\\n\\n    <ion-card *ngIf=\\\"currentImage\\\">\\n      <ion-card-header>\\n        <ion-card-subtitle>Hasil Kamera</ion-card-subtitle>\\n        <ion-card-title>Pastikan foto struk jelas/tidak buram</ion-card-title>\\n      </ion-card-header>\\n\\n      <ion-card-content>\\n        <img [src]=\\\"currentImage\\\" *ngIf=\\\"currentImage\\\">\\n      </ion-card-content>\\n    </ion-card>\\n\\n    <br>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Nomor transaksi</ion-label>\\n      <ion-input inputmode=\\\"text\\\" formControlName=\\\"nomor\\\"></ion-input>\\n    </ion-item>\\n    <div *ngFor=\\\"let error of errorMessages.nomor\\\">\\n      <ng-container *ngIf=\\\"nomor.hasError(error.type) && (nomor.dirty || nomor.touched)\\\">\\n        <center><small>{{ error.message }}</small></center>\\n      </ng-container>\\n    </div>\\n\\n    <br>\\n    <ion-button [disabled]=\\\"!bukForm.valid\\\" (click)=\\\"upload()\\\" expand=\\\"full\\\">Upload</ion-button>\\n  </form>\\n</ion-content>\\n\";"]}